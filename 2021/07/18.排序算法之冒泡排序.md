[TOC]

#### 算法原理

冒泡排序算法的原理如下(以升序排序为例)：

1.比较相邻的两个元素，如果第一个比第二个大，则交换这两个元素；
2.对每一对相邻元素重复步骤一，从开始第一对到结尾的最后一对，每一轮重复完毕后，最后的元素应该是本轮比较的最大的元素；
3.针对所有的元素重复步骤一和步骤二，除了最后一个；
4.持续每次对越来越少的元素重复上面的步骤，直到没有任何一对元素需要比较。

#### 算法分析

##### 时间复杂度

如果数组的初始状态为升序，则一趟扫描即可完成排序(理想状态),其中对元素的比较次数$$C$$和交叉换位次数$$M$$均为最小值，此时:

$$C_{min}=n-1$$

$$M_{min}=0$$

因此，冒泡排序的最佳时间复杂度为$$O(n)$$。

如果数组的初始状态为降序，那么在进行升序操作时，就会得到最差时间复杂度。此时需要进行$$n-1$$趟排序，每趟排序有$$n-i$$次关键字的比较($$1\leq i \leq n-1$$)。并且每次比较都必须移动记录三次来达到交换记录位置。在这种情况下，比较和移动次数均达到最大值:

$$C_{max}={n(n-1) \over 2}=O(n^2)$$

$$M_{max}={3n(n-1) \over 2}=O(n^2)$$

因此，冒泡排序的最差时间复杂度为$$O(n^2)$$。

##### 算法稳定性

冒泡排序的整体流程就是把小的元素往前调或者把大的元素往后调。对相邻的两个元素进行比较，交换也发生在这两个元素之间。所以，如果两个元素相等，是不会再交换的；如果两个相等的元素没有相邻，那么即使通过前面的两两交换把两个相邻起来，这时候也不会交换，所以相同元素的前后顺序并没有改变，因此冒泡排序是一种稳定排序算法。

#### 算法描述

##### 版本一

```Python
def bubble_sort(array):
    """冒泡排序，默认进行升序排序

    Args:
        array(list): 待排序数组

    Returns:
        array(list): 已排序数组
    """
    for i in reversed(range(len(array))):
        for j in range(i):
            print(f'开始进行交换，交换前数组为{array}')
            if array[j] > array[j+1]:
                array[j], array[j+1] = array[j+1], array[j]
                print(f'元素{array[j+1]}大于元素{array[j]},进行交换操作,交换后数组为{array}')
            else:
                print(f'元素{array[j+1]}不大于元素{array[j]},不进行交换操作')
    return array


if __name__ == '__main__':
    array = list(reversed(range(10)))
    print(bubble_sort(array))
```

输出结果：

```Python
开始进行交换，交换前数组为[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
元素9大于元素8,进行交换操作,交换后数组为[8, 9, 7, 6, 5, 4, 3, 2, 1, 0]
开始进行交换，交换前数组为[8, 9, 7, 6, 5, 4, 3, 2, 1, 0]
元素9大于元素7,进行交换操作,交换后数组为[8, 7, 9, 6, 5, 4, 3, 2, 1, 0]
开始进行交换，交换前数组为[8, 7, 9, 6, 5, 4, 3, 2, 1, 0]
元素9大于元素6,进行交换操作,交换后数组为[8, 7, 6, 9, 5, 4, 3, 2, 1, 0]
开始进行交换，交换前数组为[8, 7, 6, 9, 5, 4, 3, 2, 1, 0]
元素9大于元素5,进行交换操作,交换后数组为[8, 7, 6, 5, 9, 4, 3, 2, 1, 0]
开始进行交换，交换前数组为[8, 7, 6, 5, 9, 4, 3, 2, 1, 0]
元素9大于元素4,进行交换操作,交换后数组为[8, 7, 6, 5, 4, 9, 3, 2, 1, 0]
开始进行交换，交换前数组为[8, 7, 6, 5, 4, 9, 3, 2, 1, 0]
元素9大于元素3,进行交换操作,交换后数组为[8, 7, 6, 5, 4, 3, 9, 2, 1, 0]
开始进行交换，交换前数组为[8, 7, 6, 5, 4, 3, 9, 2, 1, 0]
元素9大于元素2,进行交换操作,交换后数组为[8, 7, 6, 5, 4, 3, 2, 9, 1, 0]
开始进行交换，交换前数组为[8, 7, 6, 5, 4, 3, 2, 9, 1, 0]
元素9大于元素1,进行交换操作,交换后数组为[8, 7, 6, 5, 4, 3, 2, 1, 9, 0]
开始进行交换，交换前数组为[8, 7, 6, 5, 4, 3, 2, 1, 9, 0]
元素9大于元素0,进行交换操作,交换后数组为[8, 7, 6, 5, 4, 3, 2, 1, 0, 9]
开始进行交换，交换前数组为[8, 7, 6, 5, 4, 3, 2, 1, 0, 9]
元素8大于元素7,进行交换操作,交换后数组为[7, 8, 6, 5, 4, 3, 2, 1, 0, 9]
开始进行交换，交换前数组为[7, 8, 6, 5, 4, 3, 2, 1, 0, 9]
元素8大于元素6,进行交换操作,交换后数组为[7, 6, 8, 5, 4, 3, 2, 1, 0, 9]
开始进行交换，交换前数组为[7, 6, 8, 5, 4, 3, 2, 1, 0, 9]
元素8大于元素5,进行交换操作,交换后数组为[7, 6, 5, 8, 4, 3, 2, 1, 0, 9]
开始进行交换，交换前数组为[7, 6, 5, 8, 4, 3, 2, 1, 0, 9]
元素8大于元素4,进行交换操作,交换后数组为[7, 6, 5, 4, 8, 3, 2, 1, 0, 9]
开始进行交换，交换前数组为[7, 6, 5, 4, 8, 3, 2, 1, 0, 9]
元素8大于元素3,进行交换操作,交换后数组为[7, 6, 5, 4, 3, 8, 2, 1, 0, 9]
开始进行交换，交换前数组为[7, 6, 5, 4, 3, 8, 2, 1, 0, 9]
元素8大于元素2,进行交换操作,交换后数组为[7, 6, 5, 4, 3, 2, 8, 1, 0, 9]
开始进行交换，交换前数组为[7, 6, 5, 4, 3, 2, 8, 1, 0, 9]
元素8大于元素1,进行交换操作,交换后数组为[7, 6, 5, 4, 3, 2, 1, 8, 0, 9]
开始进行交换，交换前数组为[7, 6, 5, 4, 3, 2, 1, 8, 0, 9]
元素8大于元素0,进行交换操作,交换后数组为[7, 6, 5, 4, 3, 2, 1, 0, 8, 9]
开始进行交换，交换前数组为[7, 6, 5, 4, 3, 2, 1, 0, 8, 9]
元素7大于元素6,进行交换操作,交换后数组为[6, 7, 5, 4, 3, 2, 1, 0, 8, 9]
开始进行交换，交换前数组为[6, 7, 5, 4, 3, 2, 1, 0, 8, 9]
元素7大于元素5,进行交换操作,交换后数组为[6, 5, 7, 4, 3, 2, 1, 0, 8, 9]
开始进行交换，交换前数组为[6, 5, 7, 4, 3, 2, 1, 0, 8, 9]
元素7大于元素4,进行交换操作,交换后数组为[6, 5, 4, 7, 3, 2, 1, 0, 8, 9]
开始进行交换，交换前数组为[6, 5, 4, 7, 3, 2, 1, 0, 8, 9]
元素7大于元素3,进行交换操作,交换后数组为[6, 5, 4, 3, 7, 2, 1, 0, 8, 9]
开始进行交换，交换前数组为[6, 5, 4, 3, 7, 2, 1, 0, 8, 9]
元素7大于元素2,进行交换操作,交换后数组为[6, 5, 4, 3, 2, 7, 1, 0, 8, 9]
开始进行交换，交换前数组为[6, 5, 4, 3, 2, 7, 1, 0, 8, 9]
元素7大于元素1,进行交换操作,交换后数组为[6, 5, 4, 3, 2, 1, 7, 0, 8, 9]
开始进行交换，交换前数组为[6, 5, 4, 3, 2, 1, 7, 0, 8, 9]
元素7大于元素0,进行交换操作,交换后数组为[6, 5, 4, 3, 2, 1, 0, 7, 8, 9]
开始进行交换，交换前数组为[6, 5, 4, 3, 2, 1, 0, 7, 8, 9]
元素6大于元素5,进行交换操作,交换后数组为[5, 6, 4, 3, 2, 1, 0, 7, 8, 9]
开始进行交换，交换前数组为[5, 6, 4, 3, 2, 1, 0, 7, 8, 9]
元素6大于元素4,进行交换操作,交换后数组为[5, 4, 6, 3, 2, 1, 0, 7, 8, 9]
开始进行交换，交换前数组为[5, 4, 6, 3, 2, 1, 0, 7, 8, 9]
元素6大于元素3,进行交换操作,交换后数组为[5, 4, 3, 6, 2, 1, 0, 7, 8, 9]
开始进行交换，交换前数组为[5, 4, 3, 6, 2, 1, 0, 7, 8, 9]
元素6大于元素2,进行交换操作,交换后数组为[5, 4, 3, 2, 6, 1, 0, 7, 8, 9]
开始进行交换，交换前数组为[5, 4, 3, 2, 6, 1, 0, 7, 8, 9]
元素6大于元素1,进行交换操作,交换后数组为[5, 4, 3, 2, 1, 6, 0, 7, 8, 9]
开始进行交换，交换前数组为[5, 4, 3, 2, 1, 6, 0, 7, 8, 9]
元素6大于元素0,进行交换操作,交换后数组为[5, 4, 3, 2, 1, 0, 6, 7, 8, 9]
开始进行交换，交换前数组为[5, 4, 3, 2, 1, 0, 6, 7, 8, 9]
元素5大于元素4,进行交换操作,交换后数组为[4, 5, 3, 2, 1, 0, 6, 7, 8, 9]
开始进行交换，交换前数组为[4, 5, 3, 2, 1, 0, 6, 7, 8, 9]
元素5大于元素3,进行交换操作,交换后数组为[4, 3, 5, 2, 1, 0, 6, 7, 8, 9]
开始进行交换，交换前数组为[4, 3, 5, 2, 1, 0, 6, 7, 8, 9]
元素5大于元素2,进行交换操作,交换后数组为[4, 3, 2, 5, 1, 0, 6, 7, 8, 9]
开始进行交换，交换前数组为[4, 3, 2, 5, 1, 0, 6, 7, 8, 9]
元素5大于元素1,进行交换操作,交换后数组为[4, 3, 2, 1, 5, 0, 6, 7, 8, 9]
开始进行交换，交换前数组为[4, 3, 2, 1, 5, 0, 6, 7, 8, 9]
元素5大于元素0,进行交换操作,交换后数组为[4, 3, 2, 1, 0, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[4, 3, 2, 1, 0, 5, 6, 7, 8, 9]
元素4大于元素3,进行交换操作,交换后数组为[3, 4, 2, 1, 0, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[3, 4, 2, 1, 0, 5, 6, 7, 8, 9]
元素4大于元素2,进行交换操作,交换后数组为[3, 2, 4, 1, 0, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[3, 2, 4, 1, 0, 5, 6, 7, 8, 9]
元素4大于元素1,进行交换操作,交换后数组为[3, 2, 1, 4, 0, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[3, 2, 1, 4, 0, 5, 6, 7, 8, 9]
元素4大于元素0,进行交换操作,交换后数组为[3, 2, 1, 0, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[3, 2, 1, 0, 4, 5, 6, 7, 8, 9]
元素3大于元素2,进行交换操作,交换后数组为[2, 3, 1, 0, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[2, 3, 1, 0, 4, 5, 6, 7, 8, 9]
元素3大于元素1,进行交换操作,交换后数组为[2, 1, 3, 0, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[2, 1, 3, 0, 4, 5, 6, 7, 8, 9]
元素3大于元素0,进行交换操作,交换后数组为[2, 1, 0, 3, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[2, 1, 0, 3, 4, 5, 6, 7, 8, 9]
元素2大于元素1,进行交换操作,交换后数组为[1, 2, 0, 3, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[1, 2, 0, 3, 4, 5, 6, 7, 8, 9]
元素2大于元素0,进行交换操作,交换后数组为[1, 0, 2, 3, 4, 5, 6, 7, 8, 9]
开始进行交换，交换前数组为[1, 0, 2, 3, 4, 5, 6, 7, 8, 9]
元素1大于元素0,进行交换操作,交换后数组为[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

##### 版本二

```Python
def bubble_sort(array):
    """冒泡排序，默认升序排列
    
    Args:
        array(list): 待排序数组

    Returns:
        array(list): 已排序数组
    """
    array_length = len(array)
    while array_length > 0:
        for i in range(array_length - 1):
            if array[i] > array[i+1]:
                array[i], array[i+1] = array[i+1], array[i]
        array_length -= 1
    return array


if __name__ == '__main__':
    array = list(reversed(range(10)))
    print(bubble_sort(array))
```